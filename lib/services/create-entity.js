"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createEntity = void 0;

var _helpers = require("../helpers");

const createEntity = ({
  entity,
  repository,
  schema,
  validatePermissions
}) => (0, _helpers.validateSchema)(schema)(entity).then(e => validatePermissions ? validatePermissions(e) : undefined).then(() => repository.create(entity));

exports.createEntity = createEntity;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zZXJ2aWNlcy9jcmVhdGUtZW50aXR5LnRzIl0sIm5hbWVzIjpbImNyZWF0ZUVudGl0eSIsImVudGl0eSIsInJlcG9zaXRvcnkiLCJzY2hlbWEiLCJ2YWxpZGF0ZVBlcm1pc3Npb25zIiwidGhlbiIsImUiLCJ1bmRlZmluZWQiLCJjcmVhdGUiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFFQTs7QUFFTyxNQUFNQSxZQUtJLEdBQUcsQ0FBQztBQUFDQyxFQUFBQSxNQUFEO0FBQVNDLEVBQUFBLFVBQVQ7QUFBcUJDLEVBQUFBLE1BQXJCO0FBQTZCQyxFQUFBQTtBQUE3QixDQUFELEtBQ2xCLDZCQUE4QkQsTUFBOUIsRUFBc0NGLE1BQXRDLEVBQ0dJLElBREgsQ0FDU0MsQ0FBRCxJQUFRRixtQkFBbUIsR0FBR0EsbUJBQW1CLENBQUNFLENBQUQsQ0FBdEIsR0FBNEJDLFNBRC9ELEVBRUdGLElBRkgsQ0FFUSxNQUFNSCxVQUFVLENBQUNNLE1BQVgsQ0FBa0JQLE1BQWxCLENBRmQsQ0FOSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHtTY2hlbWFPZn0gZnJvbSAneXVwJztcbmltcG9ydCB0eXBlIHtFbnRpdHksIFdyaXRlUmVwb3NpdG9yeX0gZnJvbSAnLi4vaW50ZXJmYWNlcyc7XG5pbXBvcnQge3ZhbGlkYXRlU2NoZW1hfSBmcm9tICcuLi9oZWxwZXJzJztcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUVudGl0eTogPElkID0gc3RyaW5nLCBFIGV4dGVuZHMgRW50aXR5PElkPiA9IEVudGl0eTxJZD4+KHBhcmFtczoge1xuICBlbnRpdHk6IE9taXQ8RSwgJ2lkJz4gJiB7aWQ/OiBJZH07XG4gIHJlcG9zaXRvcnk6IFdyaXRlUmVwb3NpdG9yeTxJZCwgRT47XG4gIHNjaGVtYTogU2NoZW1hT2Y8dW5rbm93bj47XG4gIHZhbGlkYXRlUGVybWlzc2lvbnM/OiAoZW50aXR5OiBPbWl0PEUsICdpZCc+ICYge2lkPzogSWR9KSA9PiBQcm9taXNlPHZvaWQ+O1xufSkgPT4gUHJvbWlzZTxJZD4gPSAoe2VudGl0eSwgcmVwb3NpdG9yeSwgc2NoZW1hLCB2YWxpZGF0ZVBlcm1pc3Npb25zfSkgPT5cbiAgdmFsaWRhdGVTY2hlbWE8dHlwZW9mIGVudGl0eT4oc2NoZW1hKShlbnRpdHkpXG4gICAgLnRoZW4oKGUpID0+ICh2YWxpZGF0ZVBlcm1pc3Npb25zID8gdmFsaWRhdGVQZXJtaXNzaW9ucyhlKSA6IHVuZGVmaW5lZCkpXG4gICAgLnRoZW4oKCkgPT4gcmVwb3NpdG9yeS5jcmVhdGUoZW50aXR5KSk7XG4iXX0=