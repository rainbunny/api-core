"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.removeEntity = void 0;

var _helpers = require("../helpers");

const removeEntity = ({
  id,
  repository,
  validatePermissions,
  fields
}) => repository.getById({
  id,
  fields: fields || {
    id: {},
    createdBy: {}
  }
}).then(_helpers.validateEntityExist).then(entity => validatePermissions ? validatePermissions(entity) : Promise.resolve(entity)).then(entity => repository.remove(entity.id));

exports.removeEntity = removeEntity;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9zZXJ2aWNlcy9yZW1vdmUtZW50aXR5LnRzIl0sIm5hbWVzIjpbInJlbW92ZUVudGl0eSIsImlkIiwicmVwb3NpdG9yeSIsInZhbGlkYXRlUGVybWlzc2lvbnMiLCJmaWVsZHMiLCJnZXRCeUlkIiwiY3JlYXRlZEJ5IiwidGhlbiIsInZhbGlkYXRlRW50aXR5RXhpc3QiLCJlbnRpdHkiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlbW92ZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBOztBQUVPLE1BQU1BLFlBS00sR0FBRyxDQUFDO0FBQUNDLEVBQUFBLEVBQUQ7QUFBS0MsRUFBQUEsVUFBTDtBQUFpQkMsRUFBQUEsbUJBQWpCO0FBQXNDQyxFQUFBQTtBQUF0QyxDQUFELEtBQ3BCRixVQUFVLENBQ1BHLE9BREgsQ0FDVztBQUFDSixFQUFBQSxFQUFEO0FBQUtHLEVBQUFBLE1BQU0sRUFBRUEsTUFBTSxJQUFJO0FBQUNILElBQUFBLEVBQUUsRUFBRSxFQUFMO0FBQVNLLElBQUFBLFNBQVMsRUFBRTtBQUFwQjtBQUF2QixDQURYLEVBRUdDLElBRkgsQ0FFUUMsNEJBRlIsRUFHR0QsSUFISCxDQUdTRSxNQUFELElBQWFOLG1CQUFtQixHQUFHQSxtQkFBbUIsQ0FBQ00sTUFBRCxDQUF0QixHQUFpQ0MsT0FBTyxDQUFDQyxPQUFSLENBQWdCRixNQUFoQixDQUh6RSxFQUlHRixJQUpILENBSVNFLE1BQUQsSUFBWVAsVUFBVSxDQUFDVSxNQUFYLENBQWtCSCxNQUFNLENBQUNSLEVBQXpCLENBSnBCLENBTksiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7RW50aXR5LCBGaWVsZHMsIFdyaXRlUmVwb3NpdG9yeX0gZnJvbSAnLi4vaW50ZXJmYWNlcyc7XG5pbXBvcnQge3ZhbGlkYXRlRW50aXR5RXhpc3R9IGZyb20gJy4uL2hlbHBlcnMnO1xuXG5leHBvcnQgY29uc3QgcmVtb3ZlRW50aXR5OiA8SWQgPSBzdHJpbmcsIEUgZXh0ZW5kcyBFbnRpdHk8SWQ+ID0gRW50aXR5PElkPj4ocGFyYW1zOiB7XG4gIGlkOiBJZDtcbiAgcmVwb3NpdG9yeTogV3JpdGVSZXBvc2l0b3J5PElkLCBFPjtcbiAgZmllbGRzPzogRmllbGRzO1xuICB2YWxpZGF0ZVBlcm1pc3Npb25zPzogKGVudGl0eToge2lkOiBJZH0gJiBQYXJ0aWFsPEU+KSA9PiBQcm9taXNlPHtpZDogSWR9ICYgUGFydGlhbDxFPj47XG59KSA9PiBQcm9taXNlPHZvaWQ+ID0gKHtpZCwgcmVwb3NpdG9yeSwgdmFsaWRhdGVQZXJtaXNzaW9ucywgZmllbGRzfSkgPT5cbiAgcmVwb3NpdG9yeVxuICAgIC5nZXRCeUlkKHtpZCwgZmllbGRzOiBmaWVsZHMgfHwge2lkOiB7fSwgY3JlYXRlZEJ5OiB7fX19KVxuICAgIC50aGVuKHZhbGlkYXRlRW50aXR5RXhpc3QpXG4gICAgLnRoZW4oKGVudGl0eSkgPT4gKHZhbGlkYXRlUGVybWlzc2lvbnMgPyB2YWxpZGF0ZVBlcm1pc3Npb25zKGVudGl0eSkgOiBQcm9taXNlLnJlc29sdmUoZW50aXR5KSkpXG4gICAgLnRoZW4oKGVudGl0eSkgPT4gcmVwb3NpdG9yeS5yZW1vdmUoZW50aXR5LmlkKSk7XG4iXX0=